<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
    <!--<link rel="stylesheet" href="css/jtsage-datebox.min.css" />-->
    <link rel="stylesheet" href="/vendor/waves/waves.min.css" />
    <link rel="stylesheet" href="/vendor/wow/animate.css" />
    <link rel="stylesheet" href="/css/nativedroid2.css" />
    <link rel="stylesheet" href="css/custom.css" />
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="vendor/cldrjs/cldr.js"></script>
    <script src="vendor/cldrjs/cldr/event.js"></script>
    <script src="vendor/cldrjs/cldr/supplemental.js"></script>
    <script src="vendor/cldrjs/cldr/unresolved.js"></script>
    <script src="vendor/globalize/globalize.js"></script>
    <script src="vendor/globalize/globalize/message.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
    <!--<script src="js/jtsage-datebox.min.js"></script>-->
    <script src="/vendor/waves/waves.min.js"></script>
    <script src="/vendor/wow/wow.min.js"></script>
    <script src="/js/nativedroid2.js"></script>

    <script id="entry-template" type="text/x-handlebars-template">
        <div data-role="collapsibleset"
             data-theme="a"
             data-content-theme="a">
            <div data-role="collapsible">
                <!--<h2>Alarms Setup</h2>-->
                <h2>{{globalize lang "setup/alarms/header"}}</h2>
                <div data-role="collapsibleset"
                     data-theme="a"
                     data-content-theme="a">
                    {{#each alarms}}
                    <div data-role="collapsible">
                        <!--h3>Alarm #{{math @index "+" 1}}</h3-->
                        <h3>{{globalize @root.lang "setup/alarms/item_no" (math @index "+" 1)}}</h3>
                        <div class="ui-field-contain">
                            <!--<label for="alarm_{{@index}}_title">Title:</label>-->
                            <label for="alarm_{{@index}}_title">{{globalize @root.lang "setup/alarms/label_title"}}</label>
                            <input type="text"
                                   name="alarm_{{@index}}_title"
                                   id="alarm_{{@index}}_title"
                                   value="{{title}}" />
                        </div>
                        <div class="ui-field-contain">
                            <!--<label for="alarm_{{@index}}_time">Time:</label>-->
                            <label for="alarm_{{@index}}_time">{{globalize @root.lang "setup/alarms/label_time"}}</label>
                            <input type="time"
                                   name="alarm_{{@index}}_time"
                                   id="alarm_{{@index}}_time" />
                        </div>
                        <fieldset>
                            <div data-role="fieldcontain">
                                <!--<label for="alarm_{{@index}}_repeat">Repeat?</label>-->
                                <label for="alarm_{{@index}}_repeat">{{globalize @root.lang "setup/alarms/label_repeat"}}</label>
                                <input type="checkbox" id="alarm_{{@index}}_repeat" data-role="flipswitch">
                            </div>
                        </fieldset>
                        <fieldset data-role="controlgroup"
                                  data-type="horizontal"
                                  class="ui-field-contain">
                            <!--<legend>Days</legend>-->
                            <legend>{{globalize @root.lang "setup/alarms/days/label"}}</legend>
                            <input type="checkbox"
                                   name="alarm_{{@index}}_days"
                                   id="alarm_{{@index}}_days_mon"
                                   value="mon" />
                            <label for="alarm_{{@index}}_days_mon">{{globalize @root.lang "setup/alarms/days/mon"}}</label>
                            <!--<label for="alarm_{{@index}}_days_mon">Mon</label>-->

                            <input type="checkbox"
                                   name="alarm_{{@index}}_days"
                                   id="alarm_{{@index}}_days_tue"
                                   value="tue" />
                            <label for="alarm_{{@index}}_days_tue">{{globalize @root.lang "setup/alarms/days/tue"}}</label>
                            <!--<label for="alarm_{{@index}}_days_tue">Tue</label>-->

                            <input type="checkbox"
                                   name="alarm_{{@index}}_days"
                                   id="alarm_{{@index}}_days_wed"
                                   value="wed" />
                            <label for="alarm_{{@index}}_days_wed">{{globalize @root.lang "setup/alarms/days/wed"}}</label>
                            <!--<label for="alarm_{{@index}}_days_wed">Wed</label>-->

                            <input type="checkbox"
                                   name="alarm_{{@index}}_days"
                                   id="alarm_{{@index}}_days_thu"
                                   value="thu" />
                            <label for="alarm_{{@index}}_days_thu">{{globalize @root.lang "setup/alarms/days/thu"}}</label>
                            <!--<label for="alarm_{{@index}}_days_thu">Thu</label>-->

                            <input type="checkbox"
                                   name="alarm_{{@index}}_days"
                                   id="alarm_{{@index}}_days_fri"
                                   value="fri" />
                            <label for="alarm_{{@index}}_days_fri">{{globalize @root.lang "setup/alarms/days/fri"}}</label>
                            <!--<label for="alarm_{{@index}}_days_fri">Fri</label>-->

                            <input type="checkbox"
                                   name="alarm_{{@index}}_days"
                                   id="alarm_{{@index}}_days_sat"
                                   value="sat" />
                            <label for="alarm_{{@index}}_days_sat">{{globalize @root.lang "setup/alarms/days/sat"}}</label>
                            <!--<label for="alarm_{{@index}}_days_sat">Sat</label>-->

                            <input type="checkbox"
                                   name="alarm_{{@index}}_days"
                                   id="alarm_{{@index}}_days_sun"
                                   value="sun" />
                            <label for="alarm_{{@index}}_days_sun">{{globalize @root.lang "setup/alarms/days/sun"}}</label>
                            <!--<label for="alarm_{{@index}}_days_sun">Sun</label>-->
                        </fieldset>
                    </div>
                    {{/each}}
                </div>
            </div>
            <div data-role="collapsible">
                <!--<h2>Weather</h2>-->
                <h2>{{globalize @root.lang "setup/weather/header"}}</h2>

                <div class="nd2-card">
                    <div class="card-supporting-text">
                        <strong>
                            <a href="http://forecast.io/"
                               target="_blank"
                               title="Powered by Forecast">
                                Powered by Forecast
                            </a>
                        </strong>
                    </div>
                </div>

                <div class="ui-field-contain">
                    <!--<label for="weather_latitude">Latitude:</label>-->
                    <label for="weather_latitude">{{globalize @root.lang "setup/weather/label_latitude"}}</label>
                    <input type="number"
                           name="weather_latitude"
                           id="weather_latitude"
                           step="0.0001"
                           value="{{weather/latitude}}" />
                </div>
                <div class="ui-field-contain">
                    <!--<label for="weather_longitude">Longitude:</label>-->
                    <label for="weather_longitude">{{globalize @root.lang "setup/weather/label_longitude"}}</label>
                    <input type="number"
                           name="weather_longitude"
                           id="weather_longitude"
                           step="0.0001"
                           value="{{weather/longitude}}" />
                </div>

                <div class="ui-field-contain">
                    <!--<label for="weather_units">Weather language</label>-->
                    <label for="weather_units">{{globalize @root.lang "setup/weather/label_units"}}</label>
                    <select name="weather_units"
                            id="weather_units"
                            type="text"
                            value="{{weather/units}}"
                            data-native-menu="false">
                        {{#select weather/units}}
                        {{#each weather/units_list}}
                        <option value="{{units_code}}">
                            {{globalize @root.lang "setup/weather/units" units_code}}
                            ({{units_code}})
                        </option>
                        {{/each}}
                        {{/select}}
                    </select>
                </div>

                <div class="ui-field-contain">
                    <!--<label for="weather_language">Weather language</label>-->
                    <label for="weather_language">{{globalize @root.lang "setup/weather/label_language"}}</label>
                    <select name="weather_language"
                            id="weather_language"
                            type="text"
                            value="{{weather/language}}"
                            data-native-menu="false">
                        {{#select weather/language}}
                        {{#each weather/languages}}
                        <option value="{{language_code}}">
                            {{globalize @root.lang "setup/weather/languages" language_code}}
                            ({{language_code}})
                        </option>
                        {{/each}}
                        {{/select}}
                    </select>
                </div>
                <div class="ui-field-contain">
                    <label for="forecastio_api_key">{{globalize @root.lang "setup/weather/label_api_key"}}</label>
                    <input name="forecastio_api_key"
                           id="forecastio_api_key"
                           type="text" />
                    <span>
                        <a class="ui-btn ui-btn-inline"
                           href="https://developer.forecast.io/"
                           target="_blank">
                            {{globalize @root.lang "setup/weather/link_api_key"}}
                        </a>
                    </span>
                </div>
            </div>
            <div data-role="collapsible" style="display: none;">
                <!--<h2>Internet Radio</h2>-->
                <h2>{{globalize @root.lang "setup/radio/header"}}</h2>

                <div class="ui-field-contain">
                    <!--<label for="radio_stations_country">Radio Stations country</label>-->
                    <label for="radio_stations_country">{{globalize @root.lang "setup/radio/label_country"}}</label>
                    <select name="radio_stations_country"
                            id="radio_stations_country"
                            type="text"
                            value="{{radio/country}}"
                            data-native-menu="false">
                        {{#select radio/country}}
                        {{#each radio/countries}}
                        <option value="{{country_code}}">{{name}} ({{country_code}})</option>
                        {{/each}}
                        {{/select}}
                    </select>
                </div>
                <div class="ui-field-contain">
                    <!--<label for="dirble_api_key">Dirble API Key</label>-->
                    <label for="dirble_api_key">{{globalize @root.lang "setup/radio/label_api_key"}}</label>
                    <input name="dirble_api_key"
                           id="dirble_api_key"
                           type="text" />
                </div>
                <div class="ui-field-contain">
                    <!--<label for="radio_custom_stations">Custom Stations (Stream URI)</label>-->
                    <label for="radio_custom_stations">{{globalize @root.lang "setup/radio/label_custom_stations"}}</label>
                    <textarea name="radio_custom_stations"
                              id="radio_custom_stations"
                              style="font-family: monospace; overflow: scroll; white-space: pre;"
                              placeholde="Stream URIs (one on each line)"
                              placeholder="{{globalize @root.lang "setup/radio/placeholder_custom_stations"}}"
                              rows="{{math radio/custom_stations.length '+' 2}}">
{{#each radio/custom_stations}}
{{stream_uri}}
{{/each}}</textarea>
                </div>
            </div>
            <div data-role="collapsible">
                <!--<h2>General</h2>-->
                <h2>{{globalize @root.lang "setup/general/header"}}</h2>
                <div class="ui-field-contain">
                    <!--<label for="general_config_file">Config file</label>-->
                    <label for="general_config_file">{{globalize @root.lang "setup/general/label_config_file"}}</label>
                    <input name="general_config_file"
                           id="general_config_file"
                           type="text"
                           value="{{general/config_file}}" />
                </div>
                <div class="ui-field-contain">
                    <label for="general_clock_12h">{{globalize @root.lang "setup/general/label_clock_12h"}}</label>
                    <select name="general_clock_12h"
                            id="general_clock_12h"
                            data-role="flipswitch"
                            value="{{clock_12h}}">
                        {{#select clock_12h}}
                        <option value="no">{{globalize @root.lang "common/No"}}</option>
                        <option value="yes">{{globalize @root.lang "common/Yes"}}</option>
                        {{/select}}
                    </select>
                </div>
                <div class="ui-field-contain" style="display: none;">
                    <!--<label for="general_mplayer_path">MPlayer path</label>-->
                    <label for="general_mplayer_path">{{globalize @root.lang "setup/general/label_mplayer_path"}}</label>
                    <input name="general_mplayer_path"
                           id="general_mplayer_path"
                           type="text"
                           value="{{general/mplayer_path}}" />
                </div>
            </div>
        </div>
        <button type="submit" value="Submit">Submit</button>
    </script>
    <script type="text/javascript" src="js/handlebars-v4.0.2.js"></script>
    <script>
        Handlebars.registerHelper("math", function (lvalue, operator, rvalue, options) {
            lvalue = parseFloat(lvalue);
            rvalue = parseFloat(rvalue);

            return {
                "+": lvalue + rvalue,
                "-": lvalue - rvalue,
                "*": lvalue * rvalue,
                "/": lvalue / rvalue,
                "%": lvalue % rvalue
            }[operator];
        });

        window.Handlebars.registerHelper('select', function (value, options) {
            var $el = $('<select />').html(options.fn(this));
            $el.find('[value="' + value + '"]').attr({ 'selected': 'selected' });
            return $el.html();
        });

        function pad(num, size) { return ('000000000' + num).substr(-size); }
    </script>
</head>
<body>
    <div data-role="page">
        <div data-role="header">
            <h1 data-globalize="setup/title">Digital Nightstand Frontend</h1>
            <div data-role="navbar"
                 data-grid="a">
                <ul>
                    <li>
                        <a href="index.html"
                           class="ui-btn ui-btn-active ui-state-persist ui-icon-prev"
                           data-globalize="setup/header">Setup</a>
                    </li>
                    <!--li>
                        <a href="player.html"
                           class="ui-btn ui-icon-prev"
                           data-ajax="false"
                           data-globalize="player/header">Radio Player</a>
                    </li-->
                </ul>
            </div><!-- /navbar -->
        </div><!-- /header -->

        <div role="main"
             class="ui-content">
        <div class="nd2-card">
            <div class="card-media">
                <img id="screenshot" />
            </div>
            <div class="card-action">
                <div class="row between-xs">
                    <div class="col-xs-12 align-right">
                        <div class="box">
                            <a href="#" id="refresh_screenshot" class="ui-btn ui-btn-inline waves-effect waves-button"><i class="zmdi zmdi-refresh"></i> <span data-globalize="main/btn_refresh_screenshot">Refresh screenshot</span></a>                      </div>
                    </div>
                </div>
            </div>
        </div>
        
            <form method="post"
                  id="form"></form>
        </div><!-- /content -->
    </div><!-- /page -->
    <script src="main.js"></script>
    <script src="config.js"></script>
    <script>
        $(document).ready(function () {
            var refresh_screenshot = function() {
                $.get("/api/get_screenshot").done(function (data) {
                    $("#screenshot").attr("src", data + "?_t=" + (+new Date()));
                });
            }
            $("#refresh_screenshot").on("click", refresh_screenshot);
            //setInterval(refresh_screenshot.bind(this), 10000);
            //refresh_screenshot();
            DigitalNightstandSetup.init();
        });
    </script>
</body>
</html>